<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
        integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w=="
        crossorigin="anonymous" />

    <style>
        i {
            font-size: 300px;
        }
    </style>
</head>

<body>
    <!-- CODE HTML TAI DAY -->
    <div class="text-center mt-4 customize">
        <div id="led" class="text-warning">
            <i class="fas fa-lightbulb"></i>
        </div>

        <button onclick="changeLed()" class="btn btn-success mt-5">CÔNG TẮC</button>
    </div>
    <!-- CODE HTML TAI DAY -->

    <!-- THƯ VIỆN JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.3.1/firebase.js"></script>
    <!-- THƯ VIỆN JS -->

    <!-- CODE JS -->
    <script>
        var firebaseConfig = {
            apiKey: "AIzaSyALBAzYblrOWqfExsLUtrCphxUUw673UFE",
            authDomain: "iot-k15-c6170.firebaseapp.com",
            databaseURL: "https://iot-k15-c6170-default-rtdb.firebaseio.com",
            projectId: "iot-k15-c6170",
            storageBucket: "iot-k15-c6170.appspot.com",
            messagingSenderId: "1097119691185",
            appId: "1:1097119691185:web:2c6c27abed9e606a824d90"
        };

        firebase.initializeApp(firebaseConfig);

        function writeUserData(userId, name, email, imageUrl) {
            firebase.database().ref('users/' + userId + '/username').set({
                phone: 0707899555,
                address: 'danang'
            });
        }

        function saveLedStatus(status) {
            firebase.database().ref('tapit/iot15/ledStatus').set(status);
        }

        let printToConsole = (snapshot) => {
            const data = snapshot.val();
            // updateStarCount(postElement, data);
            console.log('print: ', data);
            var led = document.getElementById('led');
            if(data == 'ON') {
                led.classList = "text-warning";
            }
            else {
                led.classList = "";
            }
        }

        var starCountRef = firebase.database().ref('tapit/iot15/ledStatus');
        starCountRef.on('value', printToConsole);



        // writeUserData('3', 'Trung Ngo2', 'vantrung1001@gmail.com2', 'qqqq2');





        let changeLed = () => {
            var led = document.getElementById('led');
            if (led.classList.contains('text-warning')) {
                led.classList = "";
                saveLedStatus('OFF');
            }
            else {
                led.classList = "text-warning";
                saveLedStatus('ON');
            }
        }
    </script>
    <!-- CODE JS -->
</body>

</html>